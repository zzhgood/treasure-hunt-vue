import{r as Te,o as l,c,a as $,d as Ge,b as C,e as Q,f as te,g as w,w as ve,h as e,t as a,i as b,j as I,F as j,k as O,n as F,l as J,m as Oe,u as ne,p as P,q as W,s as Fe,v as Ne,x as V,y as se,z as me,A as De,B as Be,C as qe,D as He}from"./vendor-59c16a50.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))v(p);new MutationObserver(p=>{for(const n of p)if(n.type==="childList")for(const _ of n.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&v(_)}).observe(document,{childList:!0,subtree:!0});function s(p){const n={};return p.integrity&&(n.integrity=p.integrity),p.referrerPolicy&&(n.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?n.credentials="include":p.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function v(p){if(p.ep)return;p.ep=!0;const n=s(p);fetch(p.href,n)}})();const T=(r,o)=>{const s=r.__vccOpts||r;for(const[v,p]of o)s[v]=p;return s},Ve={name:"App"},Je={id:"app"};function Xe(r,o,s,v,p,n){const _=Te("router-view");return l(),c("div",Je,[$(_)])}const Ke=T(Ve,[["render",Xe]]),q=Ge("game",{state:()=>({player:{id:null,name:"",level:1,experience:0,hp:3,coins:0},gameState:{currentLocation:null,fragments:[],skills:[],revives:0,completedLocations:[]},users:[],rankings:[],settings:{musicEnabled:!0,soundEnabled:!0}}),getters:{isLoggedIn:r=>!!r.player.id,playerRank:r=>r.rankings.findIndex(o=>o.id===r.player.id)+1,collectedFragments:r=>r.gameState.fragments.length,totalFragments:()=>3},actions:{loginUser(r){this.player={...this.player,...r},this.loadGameProgress()},logout(){this.player={id:null,name:"",level:1,experience:0,hp:3,coins:0}},addFragment(r){this.gameState.fragments.includes(r)||(this.gameState.fragments.push(r),this.saveGameProgress())},completeLocation(r){this.gameState.completedLocations.includes(r)||(this.gameState.completedLocations.push(r),this.player.experience+=100,this.player.coins+=50,this.checkLevelUp(),this.saveGameProgress(),this.updateRankings())},takeDamage(r=1){return this.player.hp=Math.max(0,this.player.hp-r),this.saveGameProgress(),this.player.hp>0},checkLevelUp(){const r=this.player.level*100;this.player.experience>=r&&(this.player.level++,this.player.experience=0,this.player.hp=3)},saveGameProgress(){if(this.isLoggedIn){const r={gameState:this.gameState,player:this.player};localStorage.setItem(`gameProgress_${this.player.id}`,JSON.stringify(r))}},loadGameProgress(){if(this.isLoggedIn){const r=localStorage.getItem(`gameProgress_${this.player.id}`);if(r){const o=JSON.parse(r);this.gameState=o.gameState,this.player={...this.player,...o.player}}}},updateRankings(){const r=this.rankings.findIndex(o=>o.id===this.player.id);r!==-1?this.rankings[r]={...this.rankings[r],level:this.player.level,experience:this.player.experience,fragments:this.gameState.fragments.length}:this.rankings.push({id:this.player.id,name:this.player.name,level:this.player.level,experience:this.player.experience,fragments:this.gameState.fragments.length}),this.rankings.sort((o,s)=>s.level!==o.level?s.level-o.level:s.fragments!==o.fragments?s.fragments-o.fragments:s.experience-o.experience),localStorage.setItem("treasureRankings",JSON.stringify(this.rankings))},loadRankings(){const r=localStorage.getItem("treasureRankings");r&&(this.rankings=JSON.parse(r))}}});const We={__name:"ParticleBackground",setup(r){const o=C(null);let s=null;const v=()=>{const n=o.value;if(!n)return;const _=30;for(let U=0;U<_;U++){const y=document.createElement("div");y.classList.add("particle");const R=Math.random()*6+2,h=Math.random()*100,g=Math.random()*15,k=Math.random()*10+15,A=Math.random()*.3+.1;y.style.width=`${R}px`,y.style.height=`${R}px`,y.style.left=`${h}%`,y.style.bottom=`-${R}px`,y.style.animationDelay=`${g}s`,y.style.animationDuration=`${k}s`,y.style.opacity=A.toString();const f=["rgba(111, 179, 255, 0.3)","rgba(102, 224, 255, 0.3)","rgba(123, 255, 178, 0.3)","rgba(255, 214, 107, 0.3)"],L=f[Math.floor(Math.random()*f.length)];y.style.background=L,n.appendChild(y)}},p=()=>{s=requestAnimationFrame(p)};return Q(()=>{v(),p()}),te(()=>{s&&cancelAnimationFrame(s)}),(n,_)=>(l(),c("div",{class:"particles-container",ref_key:"particlesContainer",ref:o},null,512))}},Qe=T(We,[["__scopeId","data-v-ab727596"]]);const Ye={class:"audio-control"},Ze=["title","disabled"],es={class:"audio-icon"},ss={key:0},ts={key:1},ns={class:"audio-text"},os={key:0},as={key:1},ls=["volume"],is=["src"],rs={key:0,class:"debug-info"},cs={__name:"AudioControl",setup(r){const o=q(),s=C(null),v=C(!1),p=C(null),n=C("idle"),_=C(!1),U=C(!1),y=w({get:()=>o.settings.musicEnabled,set:d=>{o.settings.musicEnabled=d,o.saveGameProgress()}}),R=w(()=>y.value?.5:0),h=w(()=>{const d=o.gameState.currentLocation;return{library:"./music/library-bg.mp3",harbor:"./music/harbor-bg.mp3",jungle:"./music/jungle-bg.mp3"}[d]||"./music/panorama-bg.mp3"}),g=d=>{var x,E;console.error("éŸ³é¢‘åŠ è½½é”™è¯¯:",d),p.value=`éŸ³ä¹åŠ è½½å¤±è´¥: ${((E=(x=s.value)==null?void 0:x.error)==null?void 0:E.message)||"æœªçŸ¥é”™è¯¯"}`,v.value=!1,n.value="error"},k=()=>{console.log("éŸ³é¢‘å¯ä»¥æ’­æ”¾"),v.value=!1,n.value="canplay",y.value&&_.value&&L()},A=()=>{console.log("å¼€å§‹åŠ è½½éŸ³é¢‘"),v.value=!0,n.value="loading"},f=()=>{console.warn("éŸ³é¢‘åŠ è½½åœæ»"),n.value="stalled"},L=async()=>{if(s.value)try{n.value="playing",await s.value.play(),p.value=null,console.log("éŸ³ä¹æ’­æ”¾æˆåŠŸ")}catch(d){console.error("æ’­æ”¾å¤±è´¥:",d),p.value=`æ’­æ”¾å¤±è´¥: ${d.message}`,n.value="play_error",d.name==="NotAllowedError"&&(p.value="éœ€è¦ç”¨æˆ·ç‚¹å‡»é¡µé¢åæ‰èƒ½æ’­æ”¾éŸ³ä¹")}},u=()=>{s.value&&(s.value.pause(),s.value.currentTime=0,n.value="paused")},i=async()=>{_.value=!0,y.value=!y.value,y.value?s.value&&(v.value=!0,s.value.load(),await L()):u()};return ve(h,(d,x)=>{d!==x&&s.value&&y.value&&(console.log("åˆ‡æ¢éŸ³ä¹:",d),v.value=!0,n.value="switching",setTimeout(()=>{s.value&&s.value.load()},100))}),ve(y,d=>{d&&_.value?L():d||u()}),Q(()=>{console.log("AudioControl ç»„ä»¶æŒ‚è½½"),s.value&&s.value.load();const d=()=>{_.value||(_.value=!0,console.log("ç”¨æˆ·é¦–æ¬¡äº¤äº’ï¼Œå¯ä»¥æ’­æ”¾éŸ³é¢‘äº†"),y.value&&s.value&&L())},x=["click","touchstart","keydown","mousedown"];x.forEach(E=>{document.addEventListener(E,d,{once:!0})}),window._audioCleanup=()=>{x.forEach(E=>{document.removeEventListener(E,d)})}}),te(()=>{window._audioCleanup&&window._audioCleanup(),u()}),(d,x)=>(l(),c("div",Ye,[e("button",{class:"audio-btn",onClick:i,title:y.value?"å…³é—­éŸ³ä¹":"å¼€å¯éŸ³ä¹",disabled:v.value},[e("span",es,[v.value?(l(),c("span",ss,"â³")):(l(),c("span",ts,a(y.value?"ğŸ”Š":"ğŸ”‡"),1))]),e("span",ns,[v.value?(l(),c("span",os,"åŠ è½½ä¸­...")):(l(),c("span",as,a(y.value?"éŸ³ä¹å¼€":"éŸ³ä¹å…³"),1))])],8,Ze),e("audio",{ref_key:"bgMusic",ref:s,loop:"",volume:R.value,onError:g,onCanplaythrough:k,onLoadstart:A,onStalled:f,preload:"auto"},[e("source",{src:h.value,type:"audio/mpeg"},null,8,is),x[0]||(x[0]=b(" æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘å…ƒç´ ã€‚ ",-1))],40,ls),U.value?(l(),c("div",rs,[e("div",null,"çŠ¶æ€: "+a(n.value),1),e("div",null,"é”™è¯¯: "+a(p.value),1),e("div",null,"å½“å‰éŸ³ä¹: "+a(h.value),1)])):I("",!0)]))}},_e=T(cs,[["__scopeId","data-v-b1078f45"]]);const ds={class:"game-hud"},us={class:"hud-section"},vs={class:"status-grid"},ms={class:"status-item"},ps={class:"value"},_s={class:"status-item"},gs={class:"value"},fs={class:"status-item"},hs={class:"health-bar"},ys={class:"status-item"},ks={class:"value"},$s={class:"hud-section"},bs={class:"fragments-progress"},Ss={class:"progress-text"},xs={class:"progress-bar"},Cs={class:"fragments-list"},ws={class:"hud-section"},Ls={class:"skills-list"},Ps={key:0,class:"no-skills"},zs={class:"special-items"},Ms={class:"item-count"},Us={class:"hud-section"},Rs={class:"stats-grid"},Es={class:"stat-item"},Is={class:"stat-item"},As={class:"stat-item"},js={__name:"GameHUD",setup(r){const o=q(),s=w(()=>o.player),v=w(()=>o.gameState.skills),p=w(()=>o.gameState.revives),n=w(()=>o.collectedFragments),_=w(()=>o.totalFragments),U=w(()=>o.gameState.completedLocations.length),y=w(()=>o.playerRank),R=w(()=>s.value.level*100),h=w(()=>n.value/_.value*100),g=w(()=>"00:00:00"),k=A=>({çƒŸé›¾å¼¹:"ğŸ’¨",ä¸´æ—¶æŠ¤ç›¾:"ğŸ›¡ï¸",ç–¾è·‘:"ğŸƒ",æ¢æµ‹:"ğŸ“¡"})[A]||"ğŸ¯";return(A,f)=>(l(),c("div",ds,[e("div",us,[f[4]||(f[4]=e("h3",{class:"section-title"},"ğŸ‘¤ ç©å®¶çŠ¶æ€",-1)),e("div",vs,[e("div",ms,[f[0]||(f[0]=e("span",{class:"label"},"ç­‰çº§:",-1)),e("span",ps,a(s.value.level),1)]),e("div",_s,[f[1]||(f[1]=e("span",{class:"label"},"ç»éªŒ:",-1)),e("span",gs,a(s.value.experience)+"/"+a(R.value),1)]),e("div",fs,[f[2]||(f[2]=e("span",{class:"label"},"ç”Ÿå‘½å€¼:",-1)),e("div",hs,[(l(),c(j,null,O(3,L=>e("div",{key:L,class:F(["health-point",{active:L<=s.value.hp}])},null,2)),64))])]),e("div",ys,[f[3]||(f[3]=e("span",{class:"label"},"é‡‘å¸:",-1)),e("span",ks,"ğŸ’° "+a(s.value.coins),1)])])]),e("div",$s,[f[5]||(f[5]=e("h3",{class:"section-title"},"ğŸ§© æ”¶é›†è¿›åº¦",-1)),e("div",bs,[e("div",Ss,a(n.value)+"/"+a(_.value)+" åœ°å›¾ç¢ç‰‡ ",1),e("div",xs,[e("div",{class:"progress-fill",style:J({width:h.value+"%"})},null,4)]),e("div",Cs,[(l(!0),c(j,null,O(_.value,L=>(l(),c("div",{key:L,class:F(["fragment-item",{collected:L<=n.value}])}," ç¢ç‰‡ "+a(L),3))),128))])])]),e("div",ws,[f[7]||(f[7]=e("h3",{class:"section-title"},"ğŸ’ æŠ€èƒ½ä¸ç‰©å“",-1)),e("div",Ls,[(l(!0),c(j,null,O(v.value,L=>(l(),c("div",{key:L,class:"skill-item"},a(k(L))+" "+a(L),1))),128)),v.value.length===0?(l(),c("div",Ps," æš‚æ— æŠ€èƒ½ ")):I("",!0)]),e("div",zs,[e("div",Ms,[f[6]||(f[6]=e("span",null,"ğŸ›¡ï¸ å¤æ´»ç”²:",-1)),e("span",null,a(p.value),1)])])]),e("div",Us,[f[11]||(f[11]=e("h3",{class:"section-title"},"ğŸ“Š æ¸¸æˆç»Ÿè®¡",-1)),e("div",Rs,[e("div",Es,[f[8]||(f[8]=e("span",null,"å·²å®Œæˆåœ°ç‚¹:",-1)),e("span",null,a(U.value)+"/3",1)]),e("div",Is,[f[9]||(f[9]=e("span",null,"æ¸¸æˆæ’å:",-1)),e("span",null,"#"+a(y.value),1)]),e("div",As,[f[10]||(f[10]=e("span",null,"æ€»æ¸¸æˆæ—¶é—´:",-1)),e("span",null,a(g.value),1)])])])]))}},Ts=T(js,[["__scopeId","data-v-1ca78fd5"]]);const Gs=["disabled"],Os={key:0,class:"button-icon"},Fs={class:"button-text"},Ns={__name:"GameButton",props:{variant:{type:String,default:"primary",validator:r=>["primary","secondary","outline","danger","success"].includes(r)},size:{type:String,default:"medium",validator:r=>["small","medium","large"].includes(r)},icon:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["click"],setup(r,{emit:o}){const s=r,v=o,p=n=>{s.disabled||v("click",n)};return w(()=>[`variant-${s.variant}`,`size-${s.size}`,{disabled:s.disabled}]),(n,_)=>(l(),c("button",{class:F(["game-button",[r.variant,r.size,{disabled:r.disabled}]]),onClick:p,disabled:r.disabled},[r.icon?(l(),c("span",Os,a(r.icon),1)):I("",!0),e("span",Fs,[Oe(n.$slots,"default",{},void 0,!0)])],10,Gs))}},z=T(Ns,[["__scopeId","data-v-f77b5751"]]);const Ds={class:"panorama-container"},Bs={class:"top-bar"},qs={class:"top-controls"},Hs={class:"content-area"},Vs={class:"locations-container"},Js=["onClick"],Xs={class:"location-content"},Ks={class:"location-title"},Ws={class:"location-desc"},Qs={key:0,class:"completed-badge"},Ys={__name:"PanoramaMap",emits:["enterLocation"],setup(r,{emit:o}){const s=ne(),v=q(),p=o,n=C([{id:1,name:"å¤è€å›¾ä¹¦é¦†",icon:"ğŸ“š",description:"è§£è¯»æ®‹å·å¯†ç é˜µ",task:"library"},{id:2,name:"æ¸¯å£æ˜Ÿè±¡å°",icon:"âš“",description:"æ ¡å‡†æ˜Ÿç›˜",task:"harbor"},{id:3,name:"é›¨æ—é—è¿¹",icon:"ğŸŒ¿",description:"çŸ³åƒè°œé¢˜",task:"jungle"}]),_=h=>{if(!v.isLoggedIn){alert("è¯·å…ˆç™»å½•åå†å¼€å§‹æ¸¸æˆ"),s.push("/user");return}v.gameState.currentLocation=h.task,console.log(`è¿›å…¥åœ°ç‚¹: ${h.name}`),p("enterLocation",h)},U=h=>v.gameState.completedLocations.includes(h),y=()=>{s.push("/user")},R=()=>{s.push("/ranking")};return(h,g)=>(l(),c("div",Ds,[$(Qe),$(_e),e("div",Bs,[g[2]||(g[2]=e("h1",{class:"game-title"},"ğŸ—ºï¸ å¯»å®æ¸¸æˆ - å…¨æ™¯åœ°å›¾",-1)),e("div",qs,[$(z,{onClick:y,icon:"ğŸ‘¤"},{default:P(()=>[...g[0]||(g[0]=[b(" ä¸ªäººä¸­å¿ƒ ",-1)])]),_:1}),$(z,{onClick:R,icon:"ğŸ†"},{default:P(()=>[...g[1]||(g[1]=[b(" æ’è¡Œæ¦œ ",-1)])]),_:1})])]),e("div",Hs,[$(Ts,{class:"status-panel"}),e("div",Vs,[(l(!0),c(j,null,O(n.value,k=>(l(),c("div",{key:k.id,class:F(["location",`location-${k.id}`]),onClick:A=>_(k)},[e("div",Xs,[e("div",Ks,a(k.icon)+" "+a(k.name),1),e("div",Ws,a(k.description),1),U(k.id)?(l(),c("div",Qs," âœ… å·²å®Œæˆ ")):I("",!0)])],10,Js))),128))])])]))}},Zs=T(Ys,[["__scopeId","data-v-9c89400a"]]);const et={class:"location-exploration"},st={class:"exploration-header"},tt={class:"exploration-content"},nt={class:"task-area"},ot={class:"task-description"},at={class:"interaction-zone"},lt={key:0,class:"exploration-options"},it={key:1,class:"puzzle-interface"},rt={class:"puzzle-content"},ct={class:"symbol-grid"},dt=["onClick"],ut={class:"selected-sequence"},vt={class:"puzzle-actions"},mt={key:2,class:"puzzle-interface"},pt={class:"puzzle-content"},_t={class:"star-dial-container"},gt={class:"target-dial"},ft={class:"dial"},ht={class:"player-dial"},yt={class:"rotation-display"},kt={class:"dial-controls"},$t={key:0},bt={key:1},St={key:2},xt={key:0,class:"hint"},Ct={key:3,class:"puzzle-interface"},wt={class:"puzzle-content"},Lt={class:"statues-grid"},Pt=["onClick"],zt={class:"statue-icon"},Mt={class:"statue-name"},Ut={class:"sequence-display"},Rt={class:"puzzle-actions"},Et={key:4,class:"combat-interface"},It={class:"combat-status"},At={class:"enemy-info"},jt={class:"combat-actions"},Tt={class:"game-log"},Gt={class:"log-content"},Ot={class:"log-time"},Ft={key:0,class:"result-modal"},Nt={class:"result-content"},Dt={key:0,class:"result-rewards"},Bt={__name:"LocationExploration",props:{location:{type:Object,required:!0}},emits:["backToMap","locationCompleted"],setup(r,{emit:o}){const s=q(),v=r,p=o,n=C("exploration"),_=C([]),U=C(!1),y=C(""),R=C(""),h=C([]),g=C(null),k=C(null),A=C(["ğŸŒ€","âš¡","ğŸŒŸ","ğŸ”±","ğŸ’ ","ğŸ”¯","ğŸ¯","ğŸ´"]),f=C([]),L=[0,2,5,3],u=C(0),i=C(0),d=C(!1),x=C(!1),E=C(null),ae=C([{id:1,name:"å¤ªé˜³çŸ³åƒ",icon:"â˜€ï¸",active:!1,completed:!1},{id:2,name:"æœˆäº®çŸ³åƒ",icon:"ğŸŒ™",active:!1,completed:!1},{id:3,name:"æ˜Ÿæ˜ŸçŸ³åƒ",icon:"â­",active:!1,completed:!1},{id:4,name:"å¤§åœ°çŸ³åƒ",icon:"ğŸŒ",active:!1,completed:!1}]),H=C([]),le=[1,3,2,4],ie=w(()=>v.location),N=w(()=>{const m=(u.value%360+360)%360,t=(i.value%360+360)%360;return Math.min(Math.abs(m-t),360-Math.abs(m-t))}),ge=()=>N.value<=5?"perfect":N.value<=15?"good":N.value<=30?"fair":"poor",fe=w(()=>{const m=[{id:"explore",label:"æ¢ç´¢åŒºåŸŸ",icon:"ğŸ”",variant:"primary"},{id:"search",label:"æœç´¢çº¿ç´¢",icon:"ğŸ“‹",variant:"outline"}];return s.gameState.skills.includes("detect")&&m.push({id:"detect",label:"ä½¿ç”¨æ¢æµ‹",icon:"ğŸ“¡",variant:"special"}),m}),he=m=>s.gameState.skills.includes(m),M=(m,t="info")=>{const G=new Date().toLocaleTimeString();_.value.push({message:m,type:t,time:G}),_.value.length>20&&_.value.shift()},ye=m=>{switch(m.id){case"explore":ke();break;case"search":Ue();break;case"detect":Re();break}},ke=()=>{switch(M("å¼€å§‹æ¢ç´¢å½“å‰åŒºåŸŸ...","info"),v.location.task){case"library":$e();break;case"harbor":xe();break;case"jungle":we();break;default:const m=Math.random();m<.3?re():m<.7?Ee():de()}},$e=()=>{M("å‘ç°äº†ä¸€æœ¬å¤è€çš„å¯†ç ä¹¦...","info"),n.value="libraryPuzzle",Y()},be=m=>{f.value.includes(m)?f.value=f.value.filter(t=>t!==m):f.value.push(m)},Y=()=>{f.value=[]},Se=()=>{f.value.length===L.length&&f.value.every((t,G)=>t===L[G])?(M("âœ… å¯†ç ç ´è¯‘æˆåŠŸï¼","success"),h.value=["å¤ä»£æ™ºæ…§å·è½´","ç»éªŒå€¼ +40"],B()):(M("âŒ å¯†ç é”™è¯¯ï¼Œè§¦å‘äº†é­”æ³•é™·é˜±ï¼","error"),s.takeDamage(1),Y())},xe=()=>{M("å‘ç°äº†å¤ä»£æ˜Ÿè±¡å°...","info"),n.value="harborPuzzle",i.value=Math.floor(Math.random()*360);let m;do m=Math.floor(Math.random()*360);while(Math.abs(m-i.value)<45&&Math.abs(m-i.value)>315);u.value=m,d.value=!1,x.value=!1,clearTimeout(E.value),E.value=setTimeout(()=>{x.value=!0},3e4)},X=m=>{u.value+=m,u.value=(u.value%360+360)%360},Ce=()=>{d.value=!0,setTimeout(()=>{N.value<=10?(M("âœ… æ˜Ÿç›˜æ ¡å‡†æˆåŠŸï¼","success"),h.value=["æ˜Ÿè±¡å›¾","ç»éªŒå€¼ +35"],B()):(M("âŒ æ˜Ÿç›˜æ ¡å‡†å¤±è´¥ï¼Œè§¦å‘äº†æœºå…³ï¼","error"),s.takeDamage(1)),d.value=!1,clearTimeout(E.value)},1e3)},we=()=>{M("å‘ç°äº†ç¥ç§˜çš„å¤ä»£çŸ³åƒç¾¤...","info"),n.value="junglePuzzle",Z()},Le=m=>{!m.completed&&!m.active&&(m.active=!0,H.value.push(m),M(`æ¿€æ´»äº† ${m.name}`,"info"))},Z=()=>{ae.value.forEach(m=>{m.active=!1,m.completed=!1}),H.value=[]},Pe=()=>{H.value.length===le.length&&H.value.every((t,G)=>t.id===le[G])?(M("âœ… çŸ³åƒåºåˆ—æ­£ç¡®ï¼é—è¿¹å¤§é—¨æ‰“å¼€äº†ï¼","success"),h.value=["å¤ä»£ç¬¦æ–‡","ç»éªŒå€¼ +45"],B()):(M("âŒ åºåˆ—é”™è¯¯ï¼ŒçŸ³åƒæ¢å¤äº†åŸçŠ¶","error"),Z())},re=()=>{const m=[{name:"å·¡å¤œå®ˆå«",difficulty:"easy"},{name:"æ¸¯å«é˜Ÿé•¿",difficulty:"medium"},{name:"é—è¿¹çŒäºº",difficulty:"hard"}];k.value=m[Math.floor(Math.random()*m.length)],n.value="combat",M(`âš ï¸ é­é‡äº† ${k.value.name}ï¼`,"warning")},ee=m=>{switch(m){case"attack":ce("attack");break;case"defend":ce("defend");break;case"smoke":Me();break}},ce=m=>{const t=["attack","defend"],G=t[Math.floor(Math.random()*t.length)];if(m==="attack"&&G==="attack"){const K=s.takeDamage(1);if(M("âš”ï¸ åŒæ–¹äº¤æˆ˜ï¼Œä½ å—åˆ°äº†ä¼¤å®³ï¼","warning"),!K){Ae();return}}else m==="attack"&&G==="defend"?M("âš”ï¸ æ”»å‡»è¢«æ ¼æŒ¡äº†ï¼","info"):m==="defend"&&G==="attack"&&M("ğŸ›¡ï¸ æˆåŠŸé˜²å¾¡äº†æ”»å‡»ï¼","success");Math.random()>.5&&ze()},ze=()=>{M("âœ… æˆåŠŸå‡»è´¥äº†æ•Œäººï¼","success"),h.value=["ç»éªŒå€¼ +50","é‡‘å¸ +30"],B()},Me=()=>{s.gameState.skills=s.gameState.skills.filter(m=>m!=="smoke"),M("ğŸ’¨ ä½¿ç”¨çƒŸé›¾å¼¹æˆåŠŸé€ƒè„±ï¼","success"),n.value="exploration"},de=()=>{M("ğŸ” æ‰¾åˆ°äº†é‡è¦çº¿ç´¢ï¼","success"),h.value=["åœ°å›¾ç¢ç‰‡","ç»éªŒå€¼ +20"],B()},Ue=()=>{M("ä»”ç»†æœç´¢åŒºåŸŸ...","info"),Math.random()>.5?de():re()},Re=()=>{s.gameState.skills=s.gameState.skills.filter(m=>m!=="detect"),M("ğŸ“¡ ä½¿ç”¨æ¢æµ‹æŠ€èƒ½å‘ç°äº†éšè—çš„é€šé“ï¼","success"),h.value=["åœ°å›¾ç¢ç‰‡","ç»éªŒå€¼ +25"],B()},Ee=()=>{const m={library:{question:"èƒ¡å­ä¸å¤šä¸¤è¾¹ç¿˜ï¼Œå¼€å£æ€»è¯´å¦™å¦™å¦™ï¼Œé»‘å¤œå·¡é€»çœ¼ä¼¼ç¯ï¼Œæ—¥é‡Œç™½å¤©ç¡å¤§è§‰ã€‚è¿™æ˜¯ä»€ä¹ˆï¼Ÿ",options:["çŒ«","ç‹—","è€é¼ ","çŒ«å¤´é¹°"],answer:"çŒ«"},harbor:{question:"åä¹Ÿæ˜¯åï¼Œç«‹ä¹Ÿæ˜¯åï¼Œè¡Œä¹Ÿæ˜¯åï¼Œå§ä¹Ÿæ˜¯åã€‚è¿™æ˜¯ä»€ä¹ˆï¼Ÿ",options:["é’è›™","é±¼","é¸Ÿ","ä¹Œé¾Ÿ"],answer:"é’è›™"},jungle:{question:"è„±äº†çº¢è¢å­ï¼Œæ˜¯ä¸ªç™½èƒ–å­ï¼Œå»äº†ç™½èƒ–å­ï¼Œå‰©ä¸ªé»‘ä¸¸å­ã€‚è¿™æ˜¯ä»€ä¹ˆï¼Ÿ",options:["è”æ","é¾™çœ¼","è‘¡è„","æ¨±æ¡ƒ"],answer:"è”æ"}};g.value=m[v.location.task],M("å‘ç°äº†ä¸€ä¸ªå¤è€çš„è°œé¢˜...","info")},B=()=>{s.completeLocation(v.location.id),s.addFragment(`åœ°å›¾ç¢ç‰‡ ${v.location.id}`),y.value="ä»»åŠ¡å®Œæˆï¼",R.value=`æˆåŠŸæ¢ç´¢äº†${v.location.name}`,U.value=!0,M(`ğŸ‰ å®Œæˆäº† ${v.location.name} çš„æ¢ç´¢ï¼`,"success")},Ie=()=>{U.value=!1,n.value="exploration",p("locationCompleted",v.location)},Ae=()=>{y.value="æ¸¸æˆç»“æŸ",R.value="ç”Ÿå‘½å€¼å·²å½’é›¶ï¼Œæ¢é™©å¤±è´¥",U.value=!0,M("ğŸ’€ æ¸¸æˆç»“æŸï¼","error")},je=()=>{switch(v.location.task){case"library":return"è§£è¯»å¤è€çš„å¯†ç ç¬¦å·ï¼Œç ´è¯‘éšè—çš„ä¿¡æ¯";case"harbor":return"æ ¡å‡†æ˜Ÿè±¡å°ä¸Šçš„æ˜Ÿç›˜ï¼Œæ­ç¤ºæ­£ç¡®çš„æ–¹ä½";case"jungle":return"æŒ‰ç…§æ­£ç¡®çš„é¡ºåºæ¿€æ´»çŸ³åƒï¼Œæ‰“å¼€é—è¿¹å¤§é—¨";default:return"æ¢ç´¢è¿™ä¸ªç¥ç§˜çš„åœ°ç‚¹"}};return Q(()=>{M(`è¿›å…¥ ${v.location.name}ï¼Œå¼€å§‹æ¢é™©...`,"info")}),te(()=>{clearTimeout(E.value)}),(m,t)=>{var G,K,ue;return l(),c("div",et,[e("div",st,[$(z,{onClick:t[0]||(t[0]=S=>m.$emit("backToMap")),variant:"outline",icon:"â†"},{default:P(()=>[...t[8]||(t[8]=[b(" è¿”å›åœ°å›¾ ",-1)])]),_:1}),e("h2",null,a((G=ie.value)==null?void 0:G.name)+" - "+a((K=ie.value)==null?void 0:K.description),1),$(_e)]),e("div",tt,[e("div",nt,[e("div",ot,[t[9]||(t[9]=e("h3",null,"å½“å‰ä»»åŠ¡",-1)),e("p",null,a(je()),1)]),e("div",at,[n.value==="exploration"?(l(),c("div",lt,[(l(!0),c(j,null,O(fe.value,S=>(l(),W(z,{key:S.id,onClick:D=>ye(S),icon:S.icon,variant:S.variant},{default:P(()=>[b(a(S.label),1)]),_:2},1032,["onClick","icon","variant"]))),128))])):n.value==="libraryPuzzle"?(l(),c("div",it,[t[13]||(t[13]=e("h4",null,"ğŸ“š å¤ä»£å¯†ç ç ´è¯‘",-1)),e("div",rt,[t[12]||(t[12]=e("p",null,"ç ´è¯‘å¤ä»£æ–‡çŒ®ä¸­çš„å¯†ç ç¬¦å·ï¼š",-1)),e("div",ct,[(l(!0),c(j,null,O(A.value,(S,D)=>(l(),c("div",{key:D,class:F(["symbol",{selected:f.value.includes(D)}]),onClick:Mo=>be(D)},a(S),11,dt))),128))]),e("div",ut," å·²é€‰åºåˆ—: "+a(f.value.map(S=>A.value[S]).join(" ")),1),e("div",vt,[$(z,{onClick:Se,variant:"primary"},{default:P(()=>[...t[10]||(t[10]=[b(" éªŒè¯ç­”æ¡ˆ ",-1)])]),_:1}),$(z,{onClick:Y,variant:"outline"},{default:P(()=>[...t[11]||(t[11]=[b(" é‡ç½® ",-1)])]),_:1})])])])):n.value==="harborPuzzle"?(l(),c("div",mt,[t[22]||(t[22]=e("h4",null,"âš“ æ˜Ÿç›˜æ ¡å‡†",-1)),e("div",pt,[t[21]||(t[21]=e("p",null,"æ—‹è½¬æ˜Ÿç›˜ä½¿å…¶ä¸ç›®æ ‡æ˜Ÿåº§å¯¹é½ï¼š",-1)),e("div",_t,[e("div",gt,[t[14]||(t[14]=e("h5",null,"ç›®æ ‡ä½ç½®",-1)),e("div",ft,[e("div",{class:"target-star",style:J({transform:`rotate(${i.value}deg)`})},"â­",4)])]),e("div",ht,[t[16]||(t[16]=e("h5",null,"å½“å‰æ˜Ÿç›˜",-1)),e("div",{class:"dial",style:J({transform:`rotate(${u.value}deg)`})},[...t[15]||(t[15]=[e("div",{class:"player-star"},"â­",-1)])],4),e("div",yt," å½“å‰è§’åº¦: "+a((u.value%360+360)%360)+"Â° ",1)])]),e("div",kt,[$(z,{onClick:t[1]||(t[1]=S=>X(-15)),icon:"â†¶"},{default:P(()=>[...t[17]||(t[17]=[b(" å·¦è½¬15Â° ",-1)])]),_:1}),$(z,{onClick:t[2]||(t[2]=S=>X(-5)),icon:"â†¶"},{default:P(()=>[...t[18]||(t[18]=[b(" å·¦è½¬5Â° ",-1)])]),_:1}),$(z,{onClick:t[3]||(t[3]=S=>X(5)),icon:"â†·"},{default:P(()=>[...t[19]||(t[19]=[b(" å³è½¬5Â° ",-1)])]),_:1}),$(z,{onClick:t[4]||(t[4]=S=>X(15)),icon:"â†·"},{default:P(()=>[...t[20]||(t[20]=[b(" å³è½¬15Â° ",-1)])]),_:1}),$(z,{onClick:Ce,variant:"primary",disabled:d.value},{default:P(()=>[b(a(d.value?"æ ¡å‡†ä¸­...":"æ ¡å‡†å®Œæˆ"),1)]),_:1},8,["disabled"])]),e("div",{class:F(["alignment-indicator",ge()])},[b(" å¯¹é½ç²¾åº¦: "+a(N.value)+"Â° ",1),N.value<=10?(l(),c("span",$t,"ğŸ¯ æ¥è¿‘ç›®æ ‡!")):N.value<=30?(l(),c("span",bt,"ğŸ“ è¿˜éœ€è°ƒæ•´")):(l(),c("span",St,"ğŸª åç¦»è¾ƒè¿œ"))],2),x.value?(l(),c("div",xt," ğŸ’¡ æç¤º: å°è¯•å°†å½“å‰æ˜Ÿç›˜æ—‹è½¬åˆ° "+a(i.value)+"Â° é™„è¿‘ ",1)):I("",!0)])])):n.value==="junglePuzzle"?(l(),c("div",Ct,[t[26]||(t[26]=e("h4",null,"ğŸŒ¿ çŸ³åƒæ¿€æ´»åºåˆ—",-1)),e("div",wt,[t[25]||(t[25]=e("p",null,"æŒ‰ç…§æ­£ç¡®çš„é¡ºåºæ¿€æ´»çŸ³åƒï¼š",-1)),e("div",Lt,[(l(!0),c(j,null,O(ae.value,S=>(l(),c("div",{key:S.id,class:F(["statue",{active:S.active,completed:S.completed}]),onClick:D=>Le(S)},[e("div",zt,a(S.icon),1),e("div",Mt,a(S.name),1)],10,Pt))),128))]),e("div",Ut," å½“å‰åºåˆ—: "+a(H.value.map(S=>S.name).join(" â†’ ")),1),e("div",Rt,[$(z,{onClick:Pe,variant:"primary"},{default:P(()=>[...t[23]||(t[23]=[b(" éªŒè¯åºåˆ— ",-1)])]),_:1}),$(z,{onClick:Z,variant:"outline"},{default:P(()=>[...t[24]||(t[24]=[b(" é‡ç½®åºåˆ— ",-1)])]),_:1})])])])):n.value==="combat"?(l(),c("div",Et,[t[30]||(t[30]=e("h4",null,"é­é‡å®ˆå«!",-1)),e("div",It,[e("div",At,[e("span",null,"ğŸ›¡ï¸ "+a((ue=k.value)==null?void 0:ue.name),1)]),e("div",jt,[$(z,{onClick:t[5]||(t[5]=S=>ee("attack")),icon:"âš”ï¸"},{default:P(()=>[...t[27]||(t[27]=[b(" æ”»å‡» ",-1)])]),_:1}),$(z,{onClick:t[6]||(t[6]=S=>ee("defend")),icon:"ğŸ›¡ï¸"},{default:P(()=>[...t[28]||(t[28]=[b(" é˜²å¾¡ ",-1)])]),_:1}),he("smoke")?(l(),W(z,{key:0,onClick:t[7]||(t[7]=S=>ee("smoke")),icon:"ğŸ’¨"},{default:P(()=>[...t[29]||(t[29]=[b(" çƒŸé›¾å¼¹ ",-1)])]),_:1})):I("",!0)])])])):I("",!0)])]),e("div",Tt,[t[31]||(t[31]=e("h4",null,"æ¢é™©æ—¥å¿—",-1)),e("div",Gt,[(l(!0),c(j,null,O(_.value,(S,D)=>(l(),c("div",{key:D,class:F(["log-entry",S.type])},[e("span",Ot,"["+a(S.time)+"]",1),b(" "+a(S.message),1)],2))),128))])])]),U.value?(l(),c("div",Ft,[e("div",Nt,[e("h3",null,a(y.value),1),e("p",null,a(R.value),1),h.value.length>0?(l(),c("div",Dt,[t[32]||(t[32]=e("h4",null,"è·å¾—å¥–åŠ±:",-1)),e("ul",null,[(l(!0),c(j,null,O(h.value,S=>(l(),c("li",{key:S},a(S),1))),128))])])):I("",!0),$(z,{onClick:Ie,icon:"âœ…"},{default:P(()=>[...t[33]||(t[33]=[b(" ç¡®è®¤ ",-1)])]),_:1})])])):I("",!0)])}}},qt=T(Bt,[["__scopeId","data-v-4d7a2022"]]);const Ht={class:"game-home"},Vt={__name:"GameHome",setup(r){const o=C(null),s=n=>{o.value=n},v=()=>{o.value=null},p=n=>{console.log(`å®Œæˆåœ°ç‚¹: ${n.name}`),o.value=null};return(n,_)=>(l(),c("div",Ht,[o.value?(l(),W(qt,{key:1,location:o.value,onBackToMap:v,onLocationCompleted:p},null,8,["location"])):(l(),W(Zs,{key:0,onEnterLocation:s}))]))}},Jt=T(Vt,[["__scopeId","data-v-988e4705"]]);const Xt={class:"login-modal"},Kt={class:"modal-content"},Wt={class:"modal-header"},Qt={class:"form-group"},Yt=["disabled"],Zt={class:"form-group"},en=["disabled"],sn={key:0,class:"form-group"},tn=["disabled"],nn={key:1,class:"error-message"},on={class:"form-footer"},an={__name:"LoginForm",props:{mode:{type:String,default:"login",validator:r=>["login","register"].includes(r)}},emits:["success","close"],setup(r,{emit:o}){const s=r,v=o,p=C(!1),n=C(""),_=Fe({username:"",password:"",confirmPassword:""}),U=w(()=>s.mode==="login"?_.username.trim()&&_.password.length>=6:_.username.trim()&&_.password.length>=6&&_.password===_.confirmPassword),y=h=>{_.username="",_.password="",_.confirmPassword="",n.value="",h!==s.mode&&v("close")},R=async()=>{if(U.value){p.value=!0,n.value="";try{if(await new Promise(h=>setTimeout(h,1e3)),s.mode==="register"){const h=JSON.parse(localStorage.getItem("treasureUsers")||"[]");if(h.some(k=>k.username===_.username))throw new Error("ç”¨æˆ·åå·²å­˜åœ¨");const g={id:Date.now().toString(),username:_.username,password:_.password,createdAt:new Date().toISOString()};h.push(g),localStorage.setItem("treasureUsers",JSON.stringify(h)),v("success",{id:g.id,name:g.username,level:1,experience:0,hp:3,coins:0})}else{const g=JSON.parse(localStorage.getItem("treasureUsers")||"[]").find(k=>k.username===_.username&&k.password===_.password);if(!g)throw new Error("ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯");v("success",{id:g.id,name:g.username,level:1,experience:0,hp:3,coins:0})}}catch(h){n.value=h.message}finally{p.value=!1}}};return(h,g)=>(l(),c("div",Xt,[e("div",Kt,[e("div",Wt,[e("h3",null,a(r.mode==="login"?"ç™»å½•è´¦æˆ·":"æ³¨å†Œè´¦æˆ·"),1),e("button",{class:"close-btn",onClick:g[0]||(g[0]=k=>h.$emit("close"))},"Ã—")]),e("form",{onSubmit:Ne(R,["prevent"]),class:"login-form"},[e("div",Qt,[g[6]||(g[6]=e("label",{for:"username"},"ç”¨æˆ·å",-1)),V(e("input",{id:"username","onUpdate:modelValue":g[1]||(g[1]=k=>_.username=k),type:"text",required:"",placeholder:"è¯·è¾“å…¥ç”¨æˆ·å",disabled:p.value},null,8,Yt),[[se,_.username]])]),e("div",Zt,[g[7]||(g[7]=e("label",{for:"password"},"å¯†ç ",-1)),V(e("input",{id:"password","onUpdate:modelValue":g[2]||(g[2]=k=>_.password=k),type:"password",required:"",placeholder:"è¯·è¾“å…¥å¯†ç ",disabled:p.value,minlength:"6"},null,8,en),[[se,_.password]])]),r.mode==="register"?(l(),c("div",sn,[g[8]||(g[8]=e("label",{for:"confirmPassword"},"ç¡®è®¤å¯†ç ",-1)),V(e("input",{id:"confirmPassword","onUpdate:modelValue":g[3]||(g[3]=k=>_.confirmPassword=k),type:"password",required:"",placeholder:"è¯·å†æ¬¡è¾“å…¥å¯†ç ",disabled:p.value,minlength:"6"},null,8,tn),[[se,_.confirmPassword]])])):I("",!0),n.value?(l(),c("div",nn,a(n.value),1)):I("",!0),$(z,{type:"submit",disabled:p.value||!U.value,class:"submit-btn",icon:p.value?"â³":"ğŸ”‘"},{default:P(()=>[b(a(p.value?"å¤„ç†ä¸­...":r.mode==="login"?"ç™»å½•":"æ³¨å†Œ"),1)]),_:1},8,["disabled","icon"]),e("div",on,[r.mode==="login"?(l(),c(j,{key:0},[g[9]||(g[9]=b(" è¿˜æ²¡æœ‰è´¦æˆ·ï¼Ÿ ",-1)),e("button",{type:"button",class:"link-btn",onClick:g[4]||(g[4]=k=>y("register"))}," ç«‹å³æ³¨å†Œ ")],64)):(l(),c(j,{key:1},[g[10]||(g[10]=b(" å·²æœ‰è´¦æˆ·ï¼Ÿ ",-1)),e("button",{type:"button",class:"link-btn",onClick:g[5]||(g[5]=k=>y("login"))}," ç«‹å³ç™»å½• ")],64))])],32)])]))}},pe=T(an,[["__scopeId","data-v-3d1c4c60"]]);const ln={class:"user-profile"},rn={class:"profile-header"},cn={key:0,class:"auth-buttons"},dn={key:0,class:"profile-content"},un={class:"user-info-card"},vn={class:"avatar-section"},mn={class:"user-avatar"},pn={class:"user-details"},_n={class:"user-stats"},gn={class:"progress-section"},fn={class:"level-progress"},hn={class:"progress-bar"},yn={class:"progress-text"},kn={class:"achievements-section"},$n={class:"achievements-grid"},bn={class:"achievement-icon"},Sn={class:"achievement-info"},xn={class:"achievement-name"},Cn={class:"achievement-desc"},wn={class:"action-buttons"},Ln={key:1,class:"modal-overlay"},Pn={key:2,class:"modal-overlay"},zn={__name:"UserProfile",setup(r){const o=q(),s=C(!1),v=C(!1),p=w(()=>o.isLoggedIn),n=w(()=>o.player),_=w(()=>o.playerRank),U=w(()=>n.value.level*100),y=w(()=>n.value.experience/U.value*100),R=w(()=>[{id:1,name:"åˆæ¬¡æ¢é™©",description:"å®Œæˆç¬¬ä¸€ä¸ªåœ°ç‚¹æ¢ç´¢",icon:"ğŸ¯",unlocked:o.gameState.completedLocations.length>=1},{id:2,name:"ç¢ç‰‡æ”¶é›†è€…",description:"æ”¶é›†æ‰€æœ‰åœ°å›¾ç¢ç‰‡",icon:"ğŸ§©",unlocked:o.collectedFragments>=3},{id:3,name:"èµ„æ·±æ¢é™©å®¶",description:"è¾¾åˆ°5çº§",icon:"â­",unlocked:n.value.level>=5},{id:4,name:"è´¢å¯Œç§¯ç´¯",description:"ç§¯ç´¯500é‡‘å¸",icon:"ğŸ’°",unlocked:n.value.coins>=500}]),h=L=>{if(!L)return"ğŸ‘¤";const u=["ğŸ¦","ğŸ¯","ğŸ»","ğŸ¼","ğŸ¨","ğŸµ","ğŸ§","ğŸº"],i=L.length%u.length;return u[i]},g=L=>{s.value=!1,o.loginUser(L)},k=L=>{v.value=!1,o.loginUser(L)},A=()=>{confirm("ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ")&&o.logout()},f=()=>{confirm("ç¡®å®šè¦é‡ç½®æ¸¸æˆè¿›åº¦å—ï¼Ÿè¿™å°†æ¸…é™¤æ‰€æœ‰æ¸¸æˆæ•°æ®ï¼")&&(o.gameState={currentLocation:null,fragments:[],skills:[],revives:0,completedLocations:[]},o.player={...o.player,level:1,experience:0,hp:3,coins:0},o.saveGameProgress())};return(L,u)=>(l(),c("div",ln,[e("div",rn,[u[6]||(u[6]=e("h2",null,"ğŸ‘¤ ä¸ªäººä¸­å¿ƒ",-1)),p.value?I("",!0):(l(),c("div",cn,[$(z,{onClick:u[0]||(u[0]=i=>s.value=!0),icon:"ğŸ”‘"},{default:P(()=>[...u[4]||(u[4]=[b(" ç™»å½• ",-1)])]),_:1}),$(z,{onClick:u[1]||(u[1]=i=>v.value=!0),variant:"outline",icon:"ğŸ“"},{default:P(()=>[...u[5]||(u[5]=[b(" æ³¨å†Œ ",-1)])]),_:1})]))]),p.value?(l(),c("div",dn,[e("div",un,[e("div",vn,[e("div",mn,a(h(n.value.name)),1),e("div",pn,[e("h3",null,a(n.value.name),1),e("p",null,"ç­‰çº§ "+a(n.value.level)+" æ¢é™©å®¶",1),e("div",_n,[e("span",null,"ğŸ† æ’å #"+a(_.value),1),e("span",null,"â­ ç»éªŒ "+a(n.value.experience),1)])])]),e("div",gn,[u[7]||(u[7]=e("h4",null,"å‡çº§è¿›åº¦",-1)),e("div",fn,[e("div",hn,[e("div",{class:"progress-fill",style:J({width:y.value+"%"})},null,4)]),e("span",yn,a(n.value.experience)+"/"+a(U.value)+" EXP ",1)])]),e("div",kn,[u[8]||(u[8]=e("h4",null,"ğŸ… æˆå°±",-1)),e("div",$n,[(l(!0),c(j,null,O(R.value,i=>(l(),c("div",{key:i.id,class:F(["achievement-item",{unlocked:i.unlocked}])},[e("div",bn,a(i.icon),1),e("div",Sn,[e("div",xn,a(i.name),1),e("div",Cn,a(i.description),1)])],2))),128))])])]),e("div",wn,[$(z,{onClick:A,variant:"outline",icon:"ğŸšª"},{default:P(()=>[...u[9]||(u[9]=[b(" é€€å‡ºç™»å½• ",-1)])]),_:1}),$(z,{onClick:f,variant:"danger",icon:"ğŸ”„"},{default:P(()=>[...u[10]||(u[10]=[b(" é‡ç½®è¿›åº¦ ",-1)])]),_:1})])])):I("",!0),s.value?(l(),c("div",Ln,[$(pe,{mode:"login",onSuccess:g,onClose:u[2]||(u[2]=i=>s.value=!1)})])):I("",!0),v.value?(l(),c("div",Pn,[$(pe,{mode:"register",onSuccess:k,onClose:u[3]||(u[3]=i=>v.value=!1)})])):I("",!0)]))}},Mn=T(zn,[["__scopeId","data-v-6e5fd1fd"]]);const Un={class:"user-center"},Rn={class:"center-header"},En={class:"header-actions"},In={class:"center-content"},An={__name:"UserCenter",setup(r){return ne(),(o,s)=>(l(),c("div",Un,[e("div",Rn,[$(z,{onClick:s[0]||(s[0]=v=>o.$router.push("/")),variant:"outline",icon:"â†"},{default:P(()=>[...s[2]||(s[2]=[b(" è¿”å›æ¸¸æˆ ",-1)])]),_:1}),s[4]||(s[4]=e("h1",null,"ç”¨æˆ·ä¸­å¿ƒ",-1)),e("div",En,[$(z,{onClick:s[1]||(s[1]=v=>o.$router.push("/ranking")),icon:"ğŸ†"},{default:P(()=>[...s[3]||(s[3]=[b(" æŸ¥çœ‹æ’è¡Œæ¦œ ",-1)])]),_:1})])]),e("div",In,[$(Mn)])]))}},jn=T(An,[["__scopeId","data-v-a29db9d4"]]);const Tn={class:"user-ranking"},Gn={class:"ranking-header"},On={class:"header-actions"},Fn={class:"ranking-filters"},Nn={class:"filter-group"},Dn={class:"filter-group"},Bn={class:"ranking-content"},qn={class:"top-three"},Hn={class:"podium-rank"},Vn={class:"podium-avatar"},Jn={class:"podium-info"},Xn={class:"player-name"},Kn={class:"player-stats"},Wn={class:"podium-score"},Qn={class:"ranking-list"},Yn={class:"rank-number"},Zn={class:"player-avatar"},eo={class:"player-details"},so={class:"player-name"},to={key:0,class:"you-badge"},no={class:"player-progress"},oo={class:"progress-bar"},ao={class:"level-text"},lo={class:"player-stats"},io={class:"stat"},ro={class:"stat-value"},co={class:"stat"},uo={class:"stat-value"},vo={key:0,class:"empty-state"},mo={class:"ranking-stats"},po={class:"stat-card"},_o={class:"stat-value"},go={class:"stat-card"},fo={class:"stat-value"},ho={class:"stat-card"},yo={class:"stat-value"},ko={__name:"UserRanking",setup(r){const o=q(),s=C("level"),v=C("desc");Q(()=>{o.loadRankings()});const p=w(()=>o.player),n=w(()=>[...o.rankings].sort((i,d)=>{let x,E;switch(s.value){case"level":x=i.level,E=d.level;break;case"fragments":x=i.fragments,E=d.fragments;break;case"experience":x=i.experience,E=d.experience;break;default:x=i.level,E=d.level}return v.value==="desc"?E-x:x-E})),_=w(()=>n.value.slice(0,3)),U=w(()=>n.value.slice(3)),y=w(()=>n.value.length),R=w(()=>{if(n.value.length===0)return 0;const u=n.value.reduce((i,d)=>i+d.level,0);return Math.round(u/n.value.length)}),h=w(()=>{if(n.value.length===0)return 0;const u=n.value.filter(i=>i.fragments>=3).length;return Math.round(u/n.value.length*100)}),g=u=>{if(!u)return"ğŸ‘¤";const i=["ğŸ¦","ğŸ¯","ğŸ»","ğŸ¼","ğŸ¨","ğŸµ","ğŸ§","ğŸº"],d=u.length%i.length;return i[d]},k=u=>{switch(s.value){case"level":return`Lv.${u.level}`;case"fragments":return`${u.fragments} ç¢ç‰‡`;case"experience":return`${u.experience} EXP`;default:return`Lv.${u.level}`}},A=u=>{const i=u.level*100;return u.experience/i*100},f=()=>{o.loadRankings()},L=()=>{const u=JSON.stringify(n.value,null,2),i=new Blob([u],{type:"application/json"}),d=URL.createObjectURL(i),x=document.createElement("a");x.href=d,x.download="treasure-hunt-rankings.json",x.click(),URL.revokeObjectURL(d)};return(u,i)=>(l(),c("div",Tn,[e("div",Gn,[i[4]||(i[4]=e("h2",null,"ğŸ† ç©å®¶æ’è¡Œæ¦œ",-1)),e("div",On,[$(z,{onClick:f,icon:"ğŸ”„",size:"small"},{default:P(()=>[...i[2]||(i[2]=[b(" åˆ·æ–° ",-1)])]),_:1}),$(z,{onClick:L,variant:"outline",size:"small",icon:"ğŸ“Š"},{default:P(()=>[...i[3]||(i[3]=[b(" å¯¼å‡º ",-1)])]),_:1})])]),e("div",Fn,[e("div",Nn,[i[6]||(i[6]=e("label",null,"æ’åºæ–¹å¼:",-1)),V(e("select",{"onUpdate:modelValue":i[0]||(i[0]=d=>s.value=d),class:"filter-select"},[...i[5]||(i[5]=[e("option",{value:"level"},"ç­‰çº§",-1),e("option",{value:"fragments"},"ç¢ç‰‡æ•°é‡",-1),e("option",{value:"experience"},"ç»éªŒå€¼",-1)])],512),[[me,s.value]])]),e("div",Dn,[i[8]||(i[8]=e("label",null,"æ’åºé¡ºåº:",-1)),V(e("select",{"onUpdate:modelValue":i[1]||(i[1]=d=>v.value=d),class:"filter-select"},[...i[7]||(i[7]=[e("option",{value:"desc"},"é™åº",-1),e("option",{value:"asc"},"å‡åº",-1)])],512),[[me,v.value]])])]),e("div",Bn,[e("div",qn,[(l(!0),c(j,null,O(_.value,(d,x)=>(l(),c("div",{key:d.id,class:F(["podium-item",`position-${x+1}`])},[e("div",Hn,a(x+1),1),e("div",Vn,a(g(d.name)),1),e("div",Jn,[e("div",Xn,a(d.name),1),e("div",Kn,[e("span",null,"Lv."+a(d.level),1),e("span",null,"ğŸ§© "+a(d.fragments),1),e("span",null,"â­ "+a(d.experience),1)])]),e("div",Wn,a(k(d)),1)],2))),128))]),e("div",Qn,[(l(!0),c(j,null,O(U.value,(d,x)=>(l(),c("div",{key:d.id,class:F(["ranking-item",{"current-user":d.id===p.value.id,highlight:x%2===0}])},[e("div",Yn,a(x+4),1),e("div",Zn,a(g(d.name)),1),e("div",eo,[e("div",so,[b(a(d.name)+" ",1),d.id===p.value.id?(l(),c("span",to,"(ä½ )")):I("",!0)]),e("div",no,[e("div",oo,[e("div",{class:"progress-fill",style:J({width:A(d)+"%"})},null,4)]),e("span",ao,"Lv."+a(d.level),1)])]),e("div",lo,[e("div",io,[i[9]||(i[9]=e("span",{class:"stat-icon"},"ğŸ§©",-1)),e("span",ro,a(d.fragments)+"/3",1)]),e("div",co,[i[10]||(i[10]=e("span",{class:"stat-icon"},"â­",-1)),e("span",uo,a(d.experience),1)])])],2))),128))]),n.value.length===0?(l(),c("div",vo,[...i[11]||(i[11]=[e("div",{class:"empty-icon"},"ğŸ“Š",-1),e("h3",null,"æš‚æ— æ’è¡Œæ¦œæ•°æ®",-1),e("p",null,"å¼€å§‹æ¸¸æˆåï¼Œä½ çš„æˆç»©å°†ä¼šå‡ºç°åœ¨è¿™é‡Œ",-1)])])):I("",!0)]),e("div",mo,[e("div",po,[e("div",_o,a(y.value),1),i[12]||(i[12]=e("div",{class:"stat-label"},"æ€»ç©å®¶æ•°",-1))]),e("div",go,[e("div",fo,a(R.value),1),i[13]||(i[13]=e("div",{class:"stat-label"},"å¹³å‡ç­‰çº§",-1))]),e("div",ho,[e("div",yo,a(h.value)+"%",1),i[14]||(i[14]=e("div",{class:"stat-label"},"å®Œæˆç‡",-1))])])]))}},$o=T(ko,[["__scopeId","data-v-a3f4cc2e"]]);const bo={class:"ranking-page"},So={class:"page-header"},xo={class:"header-actions"},Co={class:"page-content"},wo={__name:"RankingPage",setup(r){return ne(),(o,s)=>(l(),c("div",bo,[e("div",So,[$(z,{onClick:s[0]||(s[0]=v=>o.$router.push("/")),variant:"outline",icon:"â†"},{default:P(()=>[...s[2]||(s[2]=[b(" è¿”å›æ¸¸æˆ ",-1)])]),_:1}),s[4]||(s[4]=e("h1",null,"ç©å®¶æ’è¡Œæ¦œ",-1)),e("div",xo,[$(z,{onClick:s[1]||(s[1]=v=>o.$router.push("/user")),icon:"ğŸ‘¤"},{default:P(()=>[...s[3]||(s[3]=[b(" ä¸ªäººä¸­å¿ƒ ",-1)])]),_:1})])]),e("div",Co,[$($o)])]))}},Lo=T(wo,[["__scopeId","data-v-e3f733ce"]]),Po=[{path:"/",name:"GameHome",component:Jt},{path:"/user",name:"UserCenter",component:jn},{path:"/ranking",name:"RankingPage",component:Lo}],zo=De({history:Be(),routes:Po});const oe=qe(Ke);oe.use(He());oe.use(zo);oe.mount("#app");
